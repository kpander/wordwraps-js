/* https://github.com/kpander/wordwraps-js */
/* dist/Wordwraps.js v2.0.1 Tue Sep 05 2023 19:08:13 GMT-0400 (Eastern Daylight Saving Time) */

"use strict";const jsdom=require("jsdom"),JSDOM=jsdom["JSDOM"],nobreakspace="&nbsp;",nobreakhyphen="&#8209;";class Wordwraps{static process(e,s={}){s={widows:"h1, h2, h3, h4, h5, h6, p, li, th, td, dt, dd, a",hyphens:"h1, h2, h3, h4, h5, h6, o, li, th, td, dt, dd, a, span",groups:"h1, h2, h3, h4, h5, h6, o, li, th, td, dt, dd, a, span",...{...s}},e=new JSDOM(e);return e.window.document.querySelectorAll(s.widows).forEach(e=>{e.innerHTML=Wordwraps._joinLastTwoWords(e.innerHTML)}),e.window.document.querySelectorAll(s.groups).forEach(e=>{e.innerHTML=Wordwraps._nonBreakingHyphen(e.innerHTML)}),e.window.document.querySelectorAll(s.groups).forEach(e=>{e.innerHTML=Wordwraps._joinWordGroups(e.innerHTML)}),e.serialize()}static _joinLastTwoWords(e){var s,r,n=e.split(" ");return n.length<2||(s=n.pop(),r=n.pop(),s.match(/&nbsp;/))||(n.push(r+nobreakspace+s),e=n.join(" ")),e}static _nonBreakingHyphen(e){var s=e.split(" ");let r=s.pop();if(Wordwraps._hasMarkup(r)){var n=r.split("<");if(!n[0].match(/-/))return e;n[0]=n[0].replace(/-/g,nobreakhyphen),r=n.join("<")}else r.match(/-/)&&(r=r.replace(/-/g,nobreakhyphen));return s.push(r),e=s.join(" ")}static _hasMarkup(e){return!!e.match(/<\/?[a-z].*>/i)}static _joinWordGroups(e){for(var s=Wordwraps._getGroupPatterns(),r=0;r<s.length;r++)e=Wordwraps._applyRegex(e,s[r][1],s[r][2]);return e}static _applyRegex(e,s,r){return e.replace(s,r)}static _getGroupPatterns(){var e=[];return e.push(["n = 25",/\bn\s+=\s+(\d+)/g,"n&nbsp;=&nbsp;$1"]),e.push(["n minutes, n hours, n weeks",/\b(\d+)\s+(seconds?|minutes?|hours?|days?|weeks?|months?|years?|times?)\b/g,"$1&nbsp;$2"]),e.push(["Phase n",/\b(Phase|phase)\s+([\d]+|I|II|III|IV)\b/g,"$1&nbsp;$2"]),e.push(["Target n",/\b(Target|TARGET)\s+(\d+)\b/g,"$1&nbsp;$2"]),e.push(["<em>P</em> value",/<em>P<\/em> value/g,"<em>P</em>&nbsp;value"]),e.push(["P value",/\bP value\b/g,"P&nbsp;value"]),e.push(["25% of",/\b([0-9]+%)\sof\b/g,"$1&nbsp;of"]),e.push(["day 2",/\b(Day|day)\s+([0-9]+)/g,"$1&nbsp;$2"]),e}}module.exports=Wordwraps;